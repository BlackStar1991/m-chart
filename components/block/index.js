!function(){var e={705:function(e,t,r){var n=r(639).Symbol;e.exports=n},239:function(e,t,r){var n=r(705),a=r(607),c=r(333),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):c(e)}},561:function(e,t,r){var n=r(990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},957:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},607:function(e,t,r){var n=r(705),a=Object.prototype,c=a.hasOwnProperty,o=a.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=c.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var a=o.call(e);return n&&(t?e[i]=r:delete e[i]),a}},333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},639:function(e,t,r){var n=r(957),a="object"==typeof self&&self&&self.Object===Object&&self,c=n||a||Function("return this")();e.exports=c},990:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},279:function(e,t,r){var n=r(218),a=r(771),c=r(841),o=Math.max,i=Math.min;e.exports=function(e,t,r){var l,s,u,m,p,h,d=0,f=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var r=l,n=s;return l=s=void 0,d=t,m=e.apply(n,r)}function g(e){var r=e-h;return void 0===h||r>=t||r<0||v&&e-d>=u}function w(){var e=a();if(g(e))return y(e);p=setTimeout(w,function(e){var r=t-(e-h);return v?i(r,u-(e-d)):r}(e))}function y(e){return p=void 0,b&&l?E(e):(l=s=void 0,m)}function N(){var e=a(),r=g(e);if(l=arguments,s=this,h=e,r){if(void 0===p)return function(e){return d=e,p=setTimeout(w,t),f?E(e):m}(h);if(v)return clearTimeout(p),p=setTimeout(w,t),E(h)}return void 0===p&&(p=setTimeout(w,t)),m}return t=c(t)||0,n(r)&&(f=!!r.leading,u=(v="maxWait"in r)?o(c(r.maxWait)||0,t):u,b="trailing"in r?!!r.trailing:b),N.cancel=function(){void 0!==p&&clearTimeout(p),d=0,l=h=s=p=void 0},N.flush=function(){return void 0===p?m:y(a())},N}},218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},448:function(e,t,r){var n=r(239),a=r(5);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},771:function(e,t,r){var n=r(639);e.exports=function(){return n.Date.now()}},841:function(e,t,r){var n=r(561),a=r(218),c=r(448),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(c(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=i.test(e);return r||l.test(e)?s(e.slice(2),r?2:8):o.test(e)?NaN:+e}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.i18n,t=window.wp.blocks,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"m-chart/chart","title":"M Chart","category":"layout","icon":"chart-pie","description":"Embed a chart made with M Chart into your posts and pages","textdomain":"m-chart","attributes":{"chartId":{"type":"string","default":""}},"supports":{"html":false},"editorScript":"m-chart-editor","editorStyle":"m-chart-editor-style","render":"file:./render.php"}'),a=window.wp.element,c=window.wp.components,o=window.wp.blockEditor,i=window.wp.apiFetch,l=r.n(i),s=r(279),u=r.n(s),m=window.React;(0,t.registerBlockType)(n,{edit:function({attributes:t,setAttributes:r}){const[n,i]=(0,a.useState)([]),[s,p]=(0,a.useState)(""),[h,d]=(0,a.useState)(0),[f,v]=(0,a.useState)(0),[b,E]=(0,a.useState)(!1),[g,w]=(0,a.useState)([]),[y,N]=(0,a.useState)(null),[x,_]=(0,a.useState)(null),[S,j]=(0,a.useState)(!0),[k,T]=(0,a.useState)(!1),C=`${x}/wp-admin/post-new.php?post_type=m-chart`,O=`${x}/wp-admin/post.php?post=${t.chartId}&action=edit`,$=(0,o.useBlockProps)({className:"m-chart-block-chart-selector"}),F=`?random=${Math.round(1e6*Math.random())}`;(0,a.useEffect)((()=>{A(),P(s)}),[]);const I=n.map((e=>S?(0,a.createElement)("li",{className:e.src?"item img":"item no-image",key:e.id,onClick:()=>B(e.id),title:e.title},e.src?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("h6",{className:"title"},e.title),(0,a.createElement)("img",{src:e.src+F,alt:e.title})):(0,a.createElement)("div",{className:"type"},(0,a.createElement)("span",{className:"icon "+e.type},(0,a.createElement)("h6",{className:"title"},e.title)))):(0,a.createElement)("li",{className:"no-image",key:e.id,onClick:()=>B(e.id),title:e.title},(0,a.createElement)("div",{className:"type"},(0,a.createElement)("span",{className:"icon "+e.type}),(0,a.createElement)("h6",{className:"title"},e.title))))),M=g.filter((e=>e.id===t.chartId))[0],B=e=>{r({chartId:e}),N(e)},A=()=>{l()({path:"/m-chart/v1/options"}).then((e=>{j(e.image_support_active),_(e.siteurl),d(e.maxAvailable)}))},P=e=>{T(!1),l()({path:`/m-chart/v1/graphs/${e}`}).then((e=>{let t=[];v(e[0]),e[1].map((e=>t.push({id:e.id,title:e.title||"-",subtitle:e.subtitle,width:e.width,height:e.height,type:e.type||"",src:e.url||""}))),w(t),i(t),E(!0)})).catch((e=>{"rest_no_route"===e.code&&T(!0)}))},R=(0,m.useCallback)(u()(P,500),[]);return(0,a.createElement)("div",{...$},(0,a.createElement)(o.BlockControls,null,(0,a.createElement)(c.ToolbarGroup,{className:"m-chart-block"},(0,a.createElement)(c.ToolbarButton,{onClick:()=>window.location.href=C,icon:"external"},(0,e.__)("New Chart","m-chart")),t.chartId&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.ToolbarButton,{onClick:()=>window.location.href=O,icon:"external"},(0,e.__)("Edit Chart","m-chart")),(0,a.createElement)(c.ToolbarButton,{onClick:()=>B("")},(0,e.__)("Replace","m-chart"))))),(0,a.createElement)("div",{className:"wp-block m-chart-selector"},(0,a.createElement)("div",{className:"components-placeholder block-editor-m-chart-placeholder is-large"},(0,a.createElement)("div",{className:"components-placeholder__label"},(0,a.createElement)("span",{className:"dashicons dashicons-chart-pie"}),"Chart"),(0,a.createElement)("div",{className:"viewbox"},k?(0,a.createElement)("p",null,(0,e.__)("There was a problem fetching charts","m-chart")):(0,a.createElement)(a.Fragment,null,b?t.chartId?(0,a.createElement)("div",{className:"chart-selected"},S?(0,a.createElement)("div",{className:"image-support"},""===M?.src?(0,a.createElement)("div",{className:"type"},(0,a.createElement)("span",{className:"icon "+M.type}),(0,a.createElement)("h4",{className:"title"},M.title)):(0,a.createElement)("img",{className:"preview",src:M?.src+F})):(0,a.createElement)("div",{className:"no-image-support",style:{aspectRatio:M.width/M.height}},(0,a.createElement)("span",{className:"type "+M.type}),(0,a.createElement)("h4",{className:"title"},M?.title),(0,a.createElement)("p",null,M?.subtitle))):0===h?(0,a.createElement)("p",{className:"center"},(0,e.__)("No Charts found","m-chart"),(0,a.createElement)("a",{href:C},(0,e.__)("Create a new chart","m-chart"))):(0,a.createElement)("div",{className:"no-chart-selected"},(0,a.createElement)("div",{className:"search-box"},(0,a.createElement)(c.TextControl,{value:s,placeholder:(0,e.__)("Search by title","m-chart"),onChange:e=>(e=>{e=e.replace(/[^a-zA-Z0-9\- , ]/gi,""),p(e),R(e)})(e),autoFocus:!0}),(0,a.createElement)("p",{className:"count"},I.length," ",(0,e.__)(" of ","m-chart"),f)),0===I.length&&s.length>1?(0,a.createElement)("p",null,(0,e.__)("No Charts found using this search string","m-chart")):(0,a.createElement)("ul",{className:S?"results image-support":"results no-image-support"},I)):(0,a.createElement)("p",{className:"center"},(0,a.createElement)(c.Spinner,null)))))))},save:()=>null})}()}();